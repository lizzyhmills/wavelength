 <div data-controller="comments" >
 <div data-controller="edit-user-post">
    <div class="post <%= post.user == current_user ? "current-user-post" : "other-user-post" %>" data-controller="play-button">
      <div class="post-top d-flex">
        <% if post.user.photo.attached? %>
          <%= cl_image_tag post.user.photo.key, class: " me-2 avatar-bordered" %>
        <% else %>
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/User-avatar.svg/2048px-User-avatar.svg.png" alt="avatar" class="me-2 avatar-bordered">
        <% end %>
        <%= post.user.username.capitalize %>  <audio data-play-button-target="audio" controls src="<%= post.genre %>" class="mx-2 d-none"></audio> <br>
      </div>
      <div class="song-info">
        <div class="position-relative mb-3">
          <div class="play-song">
            <% if post.genre %>
              <div class=" ms-2" data-action="click->play-button#play" ><i  id="fa-solid"class="fa-solid fa-play" style="color: #f5f5f5;"></i></div>
            <% end %>
             <img src="<%= post.image_url %>" alt="" class="album-artwork">
          </div>
          <div class="offset-song-icons d-flex justify-content-start w-100" style="gap: 1rem;">
            <% if post.likes.where(user: current_user).any? %>
              <%= link_to post_like_path(post, post.likes.where(user: current_user).first), data: {turbo_method: :delete} do %>
                <i class="offset-icon fa-solid fa-heart text-danger" id="heart-icon"></i>
              <% end %>
            <% else %>
              <%= form_with(url: post_likes_path(post), method: :post, local: true, html: { class: "bookmark-form" }) do |form| %>
                <button type="submit" class="bookmark-button">
                  <i class="offset-icon fa-solid fa-heart" id="heart-icon"></i>
                </button>
              <% end %>
            <% end %>
            <span><%= post.likes.count %></span>
            <i class="offset-icon fa-solid fa-comment" id="message-icon" data-action="click->comments#toggle"></i>
            <% if post.favourite_posts.where(user: current_user).any? %>
                <%= link_to post_favourite_post_path(post, post.favourite_posts.where(user: current_user).first), style:"margin-left: auto;", data: {turbo_method: :delete} do %>
                <i class="offset-icon fa-solid fa-bookmark blue" ></i>
              <% end %>

            <% else %>
              <%= form_with(url: post_favourite_posts_path(post), method: :post, local: true, html: { class: "bookmark-form", style: "margin-left: auto;" }) do |form| %>
                    <button type="submit" class="bookmark-button">
                    <i class="offset-icon fa-solid fa-bookmark" id="save-icon" style="margin-left: auto;"></i>
                    </button>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="d-flex justify-content-between">
          <h3><%= post.song_name.slice(0, 20) %></h3>
          <% if current_user == post.user %>

              <i class="fa-solid fa-pen" data-action="click->edit-user-post#edit"></i>

          <% end %>
        </div>

        <h4><%= post.artist %></h4>
        <h5><%= post.caption.slice(0, 40) %><%= post.caption.length > 40 ? "..." : "" %></h5><br>
      </div>
    </div>
      <%= render 'shared/comment',  post: post %>
      <%= render 'shared/edit_card', post: post %>
  </div>
</div>

<style>

  .play-song{
  width:100%;

    #fa-solid {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size:40px;
    padding: 40px;
 filter: drop-shadow(0 0 0.80rem var(--BACKGROUND-SECONDARY-PINK));
    }
  }


</style>
